# Claude Development Setup

## Workflow —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

### –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–º–∏—Ç—ã**: –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –≤—Å–µ–≥–¥–∞ –∫–æ–º–º–∏—á—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git
- **–ü—Ä–æ–µ–∫—Ç –Ω–∞ Railway**: –û—Å–Ω–æ–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –¥–µ–ø–ª–æ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∞ Railway, –ª–æ–∫–∞–ª—å–Ω–æ –ë–î –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- **–§–æ–∫—É—Å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –î–µ–ª–∞—é —Ç–æ —á—Ç–æ –ø—Ä–æ—Å—è—Ç, –Ω–∏—á–µ–≥–æ –ª–∏—à–Ω–µ–≥–æ
- **–ö—Ä–∞—Ç–∫–æ—Å—Ç—å**: –û—Ç–≤–µ—á–∞—é –∫–æ—Ä–æ—Ç–∫–æ –∏ –ø–æ –¥–µ–ª—É

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞:
- **Backend**: Node.js + Express + TypeScript
- **Database**: PostgreSQL (—á–µ—Ä–µ–∑ Railway)
- **ORM**: Prisma
- **Frontend**: Vanilla JS (–≤ public/app.js)
- **Bot**: Telegram Bot API
- **Deploy**: Railway

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã:
- `npm run build` - —Å–±–æ—Ä–∫–∞ TypeScript
- `npm run start` - –∑–∞–ø—É—Å–∫ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ  
- `npm run dev` - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–ª–æ–∫–∞–ª—å–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –ë–î)
- `npm run db:push` - –ø—É—à —Å—Ö–µ–º—ã –≤ –ë–î
- `npm run db:generate` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma –∫–ª–∏–µ–Ω—Ç–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:
```
src/
‚îú‚îÄ‚îÄ routes/          # API —Ä–æ—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ users.ts     # /users/* - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ reviews.ts   # /reviews/* - —Ä–∞–±–æ—Ç–∞ —Å –æ—Ç–∑—ã–≤–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ admin.ts     # /admin/* - –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ telegram.ts  # –≤–∞–ª–∏–¥–∞—Ü–∏—è Telegram WebApp –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ seed.ts      # —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îî‚îÄ‚îÄ bot.ts       # Telegram –±–æ—Ç
‚îî‚îÄ‚îÄ index.ts         # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞

public/
‚îú‚îÄ‚îÄ index.html       # —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ app.js          # –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π JavaScript
```

### –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:
1. –ò—Å–ø–æ–ª—å–∑—É—é TodoWrite –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
2. –ò—Å–ø—Ä–∞–≤–ª—è—é –∫–æ–¥
3. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∫–æ–º–º–∏—á—É –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git**
4. **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—É—à—É –∫–æ–º–º–∏—Ç—ã –∫–æ–º–∞–Ω–¥–æ–π `git push`**
5. –û–±—ä—è—Å–Ω—è—é —á—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (–∫—Ä–∞—Ç–∫–æ)

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
- Telegram WebApp —Å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –æ—Ç–∑—ã–≤–æ–≤
- PostgreSQL –Ω–∞ Railway (–ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ –≤–∞–ª–∏–¥–Ω—ã—Ö Telegram –¥–∞–Ω–Ω—ã—Ö
- BigInt –¥–ª—è telegramId –≤ –ë–î (—Ç—Ä–µ–±—É–µ—Ç careful handling)

### ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ë–ê–ì–ò –ò –†–ï–®–ï–ù–ò–Ø:

#### üö® BigInt Serialization Error
**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ 500 "Do not know how to serialize a BigInt" –≤ /users/me
**–ü—Ä–∏—á–∏–Ω–∞**: Prisma –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç telegramId –∫–∞–∫ BigInt, –∞ JSON.stringify –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å
**–†–µ—à–µ–Ω–∏–µ**: 
```javascript
const userResponse = {
  ...user,
  telegramId: user.telegramId.toString() // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º BigInt –≤ —Å—Ç—Ä–æ–∫—É
};
res.json(userResponse);
```
**–§–∞–π–ª—ã**: src/routes/users.ts (—Å—Ç—Ä–æ–∫–∏ ~131-136, ~74-79)

#### üîç –û—Ç–ª–∞–¥–∫–∞ –≤–∫–ª–∞–¥–∫–∏ "–ü—Ä–æ –º–µ–Ω—è":
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: GET /users (–ø—Ä–æ—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ telegramId)
- –í–∫–ª–∞–¥–∫–∞ "–ü—Ä–æ –º–µ–Ω—è": POST /users/me (—Ç—Ä–µ–±—É–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é Telegram –¥–∞–Ω–Ω—ã—Ö + BigInt –æ–±—Ä–∞–±–æ—Ç–∫—É)
- –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON