# Проект: Telegram-бот с мини-приложением для анонимных отзывов

## Описание проекта
Telegram-бот с встроенным мини-приложением (Web App), позволяющий пользователям оставлять и читать анонимные отзывы о других участниках.

## Основные функции

### 1. Telegram-бот
- Регистрация новых пользователей
- Запуск мини-приложения через inline-кнопку
- Уведомления о новых отзывах
- Базовая навигация и команды

### 2. Мини-приложение (Web App)
- **Просмотр профилей**: список всех зарегистрированных пользователей
- **Чтение отзывов**: просмотр отзывов о себе и других пользователях
- **Написание отзывов**: ответы на 2-3 вопроса о выбранном пользователе
- **Анонимность**: отзывы публикуются анонимно

## Технический стек

### Backend
- **Node.js** с TypeScript
- **Express.js** - веб-фреймворк
- **node-telegram-bot-api** - работа с Telegram Bot API
- **PostgreSQL** - база данных
- **Prisma** - ORM для работы с БД

### Frontend (Mini App)
- **React** с TypeScript
- **Telegram Web App SDK**
- **Tailwind CSS** - стилизация
- **Vite** - сборщик

### Деплой
- **Railway** - хостинг и база данных
- **Environment variables** для конфигурации

## Структура базы данных

### Таблица `users`
- `id` (UUID)
- `telegram_id` (BigInt, уникальный)
- `username` (String, опционально)
- `first_name` (String)
- `last_name` (String, опционально)
- `created_at` (DateTime)
- `updated_at` (DateTime)

### Таблица `reviews`
- `id` (UUID)
- `author_id` (FK -> users.id)
- `target_id` (FK -> users.id)
- `talents_answer` (Text) # Ответ на "Таланты, силы, компетенции, темы"
- `client_answer` (Text) # Ответ на "Какого клиента бы привели?"
- `created_at` (DateTime)

## Пользовательский путь

1. **Старт**: Пользователь запускает бота командой `/start`
2. **Регистрация**: Автоматическая регистрация с данными из Telegram
3. **Вход в приложение**: Нажатие на кнопку "Открыть приложение"
4. **Главный экран**: Список профилей всех пользователей
5. **Профиль пользователя**: 
   - Просмотр отзывов о выбранном человеке
   - Кнопка "Оставить отзыв"
6. **Форма отзыва**: Ответы на заданные вопросы
7. **Публикация**: Отзыв сохраняется с указанием автора, но отображается анонимно

## Вопросы для отзывов
1. Таланты, силы, компетенции, темы
2. Какого клиента бы привели?

## Безопасность и модерация
- Отзывы отображаются анонимно (автор сохраняется в БД)
- Возможность раскрытия автора отзыва (админ-функция)
- Возможность блокировки пользователей
- Лимиты на количество отзывов (опционально)
- Фильтрация нецензурной лексики (опционально)

## План разработки

### Этап 1: Базовая инфраструктура
- Настройка проекта Node.js с TypeScript
- Создание Telegram-бота
- Настройка базы данных PostgreSQL с Prisma

### Этап 2: Backend API
- Эндпоинты для работы с пользователями
- Эндпоинты для отзывов
- Интеграция с Telegram Bot API

### Этап 3: Mini App Frontend
- Создание React-приложения
- Интеграция Telegram Web App SDK
- Реализация UI компонентов

### Этап 4: Интеграция и тестирование
- Связка бота с мини-приложением
- Тестирование функционала
- Исправление багов

### Этап 5: Деплой
- Настройка Railway
- Конфигурация переменных окружения
- Запуск в продакшн

## Необходимые данные от заказчика
1. Токен Telegram-бота (получить у @BotFather)
2. Финальный список вопросов для отзывов
3. Требования к модерации (если нужны)
4. Дизайн-предпочтения для мини-приложения

---

**Статус**: Ожидание согласования